<div class="hero" id="server-status">
	<div class="wrap">
	<h1 id="motd-title">About</h1>
	<div class="row">
		<div class="col-8 left">
			<div>
				<p>
					We run on Minecraft 1.21.10 with a curated set of server-side mods and custom resources that enhance the experience
					without turning it into something unrecognizable. The goal is to keep the core survival loop feeling vanilla-friendly,
					while adding more depth, polish, and long-term progression.
				</p>
				<p>
					Most of what we add is aimed at making the world feel more alive and worth exploring. You’ll find more reasons to
					travel, loot, and interact with the environment, along with expansions to familiar vanilla systems that feel natural
					instead of gimmicky. PvE also has more weight here—getting geared and staying sharp actually matters—without pushing the
					server into full RPG territory.
				</p>
				<p>
					On top of that, the server is built around meaningful economy interaction and territory control. Money has a real
					purpose, trading and shops matter, and land claims are intentionally costly so protection feels earned and the world
					doesn’t get swallowed by endless free claims. Finally, we include a handful of quality-of-life improvements to cut down
					on tedious busywork, while keeping the challenge and survival vibe intact.
				</p>
			</div>
		</div>
		<div class="col-4 ip">
			<h1 id="status-title">Server Status</h1>
			<div style="position: relative;margin-bottom:24px;">
				<small>SERVER IP</small>
				<div class="command-card">
					<code id="server-ip" style="width:100%;">play.valhallamc.ca</code>
					<button class="copy-button" onclick="copyToClipboard(this, 'play.valhallamc.ca')">COPY</button>
				</div>
			</div>
			<div id="status-content">
				<p class="muted">Loading server status...</p>
			</div>
		</div>
	</div>
	<a class="scroll-prompt" href="#below-the-fold" onclick="smoothScroll(event)">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-mouse"
			viewBox="0 0 16 16">
			<path
				d="M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 3m4 8a4 4 0 0 1-8 0V5a4 4 0 1 1 8 0zM8 0a5 5 0 0 0-5 5v6a5 5 0 0 0 10 0V5a5 5 0 0 0-5-5" />
		</svg>
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-double-down"
			viewBox="0 0 16 16">
			<path fill-rule="evenodd"
				d="M1.646 6.646a.5.5 0 0 1 .708 0L8 12.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708" />
			<path fill-rule="evenodd"
				d="M1.646 2.646a.5.5 0 0 1 .708 0L8 8.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708" />
		</svg>
		<small>scroll down</small>
	</a>
	</div>
</div>

<script>
	function adjustServerStatusHeight() {
		const serverStatus = document.getElementById('server-status');
		const viewportHeight = window.innerHeight;
		const statusHeight = serverStatus.offsetHeight;
		const margin = serverStatus.offsetTop; // Adjust for any margins
		if (statusHeight < viewportHeight - margin) {
			serverStatus.style.height = `${viewportHeight - margin}px`;
		}
	}
	window.addEventListener('resize', adjustServerStatusHeight);
	window.addEventListener('load', adjustServerStatusHeight);

	async function fetchServerStatus() {
		try {
			const response = await fetch('https://api.mcsrvstat.us/3/play.valhallamc.ca');
			const data = await response.json();

			const statusDiv = document.getElementById('status-content');
			const statusTitle = document.getElementById('status-title');

			if (data.online) {
				statusTitle.innerHTML = '<span class="sonar-ping">●</span> <small style="margin-bottom:0;">Server is ONLINE</small>';
				statusTitle.style.color = '#8ffa8b';
			} else {
				statusTitle.innerHTML = '● <small>Server is OFFLINE</small>';
			}

			if (data.online) {
				statusDiv.innerHTML = `
						<div class="row">
						<p class="muted">Players: <strong>${data.players.online} / ${data.players.max}</strong></p>
						<p class="muted">Version: <strong>${data.version}</strong></p>
						</div>
						${data.players.list && data.players.list.length > 0 ? `
						<div>
							<p class="muted" style="margin: 0 0 8px 0; font-weight: 700; color: var(--accent);"><small>Online Players:</small></p>
							<div class="row" style="display: flex; flex-wrap: wrap; gap: 6px;">
							${data.players.list.map(p => {
					const name = typeof p === 'string' ? p : p.name || p.uuid;
					return `<span style="padding: 4px 10px; background: rgba(125, 211, 252, 0.12); border: 1px solid rgba(125, 211, 252, 0.25); border-radius: 6px; font-size: 13px; color: var(--text);">${name}</span>`;
				}).join('')}
							</div>
						</div>
						` : ''}
						<p class="muted" style="font-size: 12px; margin-top: 8px;">Last updated: ${new Date().toLocaleTimeString()} | provided by mcstatus.io</p>
					`;
			} else {
				statusDiv.innerHTML = `
						<p class="muted">The server may be restarting or temporarily unavailable.</p>
					`;
			}
		} catch (error) {
			document.getElementById('status-content').innerHTML = `
					<p class="muted" style="color: #ffd0d0;">Failed to fetch server status. Please try again later.</p>
				`;
		}
	}

	fetchServerStatus();
	setInterval(fetchServerStatus, 60000);
</script>