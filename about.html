<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ValhallaMC SMP | About</title>
  <meta name="description" content="ValhallaMC SMP | survival multiplayer server | minecraft version 1.21.10." />
  <meta name="keywords" content="ValhallaMC, Minecraft SMP, Minecraft server, SMP, rules, map, commands, 1.21.10, vanilla minecraft, survival multiplayer" />
  <meta name="robots" content="index, follow" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://valhallamc.ca/about/" />
  <meta property="og:title" content="ValhallaMC SMP | About" />
  <meta property="og:description" content="ValhallaMC SMP | survival multiplayer server | minecraft version 1.21.10." />
  <meta property="og:image" content="./banner.jpg" />

  <!-- X (Twitter) -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://valhallamc.ca/about/" />
  <meta property="twitter:title" content="ValhallaMC SMP | About" />
  <meta property="twitter:description" content="ValhallaMC SMP | survival multiplayer server | minecraft version 1.21.10." />
  <meta property="twitter:image" content="./banner.jpg" />

  <link rel="icon" href="server-icon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="./style.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&family=Stack+Sans+Notch:wght@200..700&family=Zalando+Sans+Expanded:ital,wght@0,200..900;1,200..900&display=swap"
    rel="stylesheet">
  <script defer src="https://js.tebex.io/v/1.js"></script>
  <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it-attrs@4.3.1/markdown-it-attrs.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it-container@4.0.0/dist/markdown-it-container.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it-link-attributes@4.0.1/dist/markdown-it-link-attributes.min.js"></script>
</head>

<body>
  <iframe class="video-bg" width="1920" height="1080" allow="autoplay" src="https://www.youtube.com/embed/7CouiWXWKLY?si=ZnllnfbVE8V5K_NX&amp;controls=0&autoplay=1&loop=1&mute=1&playlist=7CouiWXWKLY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; loop;" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

  <div class="wrap">
    <script>
      fetch('components/navigation.html')
        .then(response => response.text())
        .then(data => {
          const element = document.createElement('div');
          element.classList.add('navigation');
          document.querySelector('.wrap').insertAdjacentElement('afterbegin', element);
          element.innerHTML = data;

          const scripts = element.querySelectorAll('script');
          scripts.forEach(oldScript => {
            const newScript = document.createElement('script');
            Array.from(oldScript.attributes).forEach(attr =>
              newScript.setAttribute(attr.name, attr.value)
            );
            newScript.appendChild(document.createTextNode(oldScript.innerHTML));
            oldScript.parentNode.replaceChild(newScript, oldScript);
          });
        });
    </script>

    <script>
      fetch('components/about/hero.html')
        .then(response => response.text())
        .then(data => {
          const element = document.createElement('div');
          element.classList.add('hero-container');
          document.querySelector('#above-the-fold').insertAdjacentElement('afterbegin', element);
          element.innerHTML = data;

          const scripts = element.querySelectorAll('script');
          scripts.forEach(oldScript => {
            const newScript = document.createElement('script');
            Array.from(oldScript.attributes).forEach(attr =>
              newScript.setAttribute(attr.name, attr.value)
            );
            newScript.appendChild(document.createTextNode(oldScript.innerHTML));
            oldScript.parentNode.replaceChild(newScript, oldScript);
          });
        });
    </script>
  </div>

    <script>
      const contentDir = './content/about/';

      fetch(`${contentDir}index.json`)
        .then(res => res.json())
        .then(data => {
          const fetches = data.map(section =>
        fetch(`${contentDir}${section}`)
          .then(response => response.text())
          .then(markdownContent => {
            const htmlContent = md.render(markdownContent);
            const element = document.createElement('div');
            element.classList.add(section.replace('.md', ''));
            element.innerHTML = htmlContent;

            const componentMeta = element.querySelector('.componentMeta');
            const meta = {};
            if (componentMeta) {
          componentMeta.querySelectorAll('p').forEach(p => {
            const [rawKey, ...rest] = p.textContent.split('=');
            if (!rawKey) return;
            const key = rawKey.trim();
            const rawVal = rest.join('=').trim();
            const value = rawVal.includes(',') ? rawVal.split(',').map(s => s.trim()) : rawVal;
            meta[key] = value;
          });

          if (meta.id) element.id = Array.isArray(meta.id) ? meta.id[0] : meta.id;
          if (meta.classlist) {
            const classes = Array.isArray(meta.classlist) ? meta.classlist : String(meta.classlist).split(',').map(s => s.trim());
            element.classList.add(...classes);
            delete meta.classlist;
          }
            }

            element._componentMeta = meta;

            const rawOrder = meta.order !== undefined ? (Array.isArray(meta.order) ? meta.order[0] : meta.order) : null;
            const order = rawOrder !== null ? Number(rawOrder) : Infinity;

            return { element, order };
          })
          .catch(error => {
            console.error('Error fetching markdown file:', error);
            return null;
          })
          );

          Promise.all(fetches).then(results => {
        results
          .filter(Boolean)
          .sort((a, b) => a.order - b.order)
          .forEach(item => document.querySelector('.output').appendChild(item.element));
          });
        })
        .catch(error => console.error('Error fetching index.json:', error));
    </script>

  <div id="above-the-fold"></div>

  <div class="output" id="below-the-fold"></div>

  <footer>
    <script>
      fetch('components/footer.html')
        .then(response => response.text())
        .then(data => {
          const element = document.createElement('div');
          element.classList.add('footer-content', 'wrap');
          document.querySelector('footer').appendChild(element);
          element.innerHTML = data;

          const scripts = element.querySelectorAll('script');
          scripts.forEach(oldScript => {
            const newScript = document.createElement('script');
            Array.from(oldScript.attributes).forEach(attr =>
              newScript.setAttribute(attr.name, attr.value)
            );
            newScript.appendChild(document.createTextNode(oldScript.innerHTML));
            oldScript.parentNode.replaceChild(newScript, oldScript);
          });
        });
    </script>
  </footer>
  <script src="./globals.js"></script>
</body>
</html>